(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{176:function(e,n,t){const r=t(6),i=t(2),s=t(151),o=t(220),a=t(207),d=t(224);e.exports=r.View.extend({id:"users",template:d,ui:{list_region:".list-region",add:".add-item",dimmer:".dimmer"},regions:{list_region:"@ui.list_region"},events:{"click @ui.add":function(e){e.preventDefault(),i.Controller.showUserForm(new s.Model)}},onRender:function(){let e=this;i.Api.Users.getAll(["permissions"]).then(n=>{!e.isDestroyed()&&n&&n.length&&e.showChildView("list_region",new o({collection:new s.Collection(n)}))}).catch(n=>{e.showChildView("list_region",new a({code:n.code,message:n.message,retry:function(){i.Controller.showUsers()}})),console.error(n)}).then(()=>{e.ui.dimmer.removeClass("active")})}})},207:function(e,n,t){const r=t(6),i=t(208);e.exports=r.View.extend({template:i,className:"alert alert-icon alert-warning m-5",ui:{retry:"a.retry"},events:{"click @ui.retry":function(e){e.preventDefault(),this.getOption("retry")()}},templateContext:function(){return{message:this.getOption("message"),code:this.getOption("code"),retry:"function"==typeof this.getOption("retry")}}})},208:function(module,exports,__webpack_require__){(function(_){module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)__p+='<i class="fe fe-alert-triangle mr-2" aria-hidden="true"></i>\r\n'+(null==(__t=code?"<strong>"+code+"</strong> &mdash; ":"")?"":__t)+"\r\n"+__e(message)+"\r\n\r\n",retry&&(__p+='\r\n    <br><br><a href="#" class="btn btn-sm btn-warning retry">'+__e(i18n("str","try-again"))+"</a>\r\n"),__p+="\r\n";return __p}}).call(this,__webpack_require__(3))},220:function(e,n,t){const r=t(6),i=t(221),s=t(223),o=r.CollectionView.extend({tagName:"tbody",childView:i});e.exports=r.View.extend({tagName:"table",className:"table table-hover table-outline table-vcenter card-table",template:s,regions:{body:{el:"tbody",replaceElement:!0}},onRender:function(){this.showChildView("body",new o({collection:this.collection}))}})},221:function(e,n,t){const r=t(6),i=t(2),s=t(8),o=t(222);e.exports=r.View.extend({template:o,tagName:"tr",ui:{edit:"a.edit-user",permissions:"a.edit-permissions",password:"a.set-password",login:"a.login",delete:"a.delete-user"},events:{"click @ui.edit":function(e){e.preventDefault(),i.Controller.showUserForm(this.model)},"click @ui.permissions":function(e){e.preventDefault(),i.Controller.showUserPermissions(this.model)},"click @ui.password":function(e){e.preventDefault(),i.Controller.showUserPasswordForm(this.model)},"click @ui.delete":function(e){e.preventDefault(),i.Controller.showUserDeleteConfirm(this.model)},"click @ui.login":function(e){e.preventDefault(),i.Cache.User.get("id")!==this.model.get("id")&&(this.ui.login.prop("disabled",!0).addClass("btn-disabled"),i.Api.Users.loginAs(this.model.get("id")).then(e=>{s.addToken(e.token,e.user.nickname||e.user.name),window.location="/",window.location.reload()}).catch(e=>{alert(e.message),this.ui.login.prop("disabled",!1).removeClass("btn-disabled")}))}},templateContext:{isSelf:function(){return i.Cache.User.get("id")===this.id}},initialize:function(){this.listenTo(this.model,"change",this.render)}})},222:function(module,exports,__webpack_require__){(function(_){module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj){__p+='<td class="text-center">\r\n    <div class="avatar d-block" style="background-image: url('+__e(avatar||"/images/default-avatar.jpg")+')">\r\n        <span class="avatar-status '+__e(is_disabled?"bg-red":"bg-green")+'"></span>\r\n    </div>\r\n</td>\r\n<td>\r\n    <div>'+__e(name)+'</div>\r\n    <div class="small text-muted">\r\n        '+__e(i18n("str","created-on",{date:formatDbDate(created_on,"Do MMMM YYYY")}))+"\r\n    </div>\r\n</td>\r\n<td>\r\n    <div>"+__e(email)+"</div>\r\n</td>\r\n<td>\r\n    <div>\r\n        ";var r=[];roles.map((function(e){e&&r.push(i18n("roles",e))})),__p+="\r\n        "+__e(r.join(", "))+'\r\n    </div>\r\n</td>\r\n<td class="text-right">\r\n    <div class="item-action dropdown">\r\n        <a href="#" data-toggle="dropdown" class="icon"><i class="fe fe-more-vertical"></i></a>\r\n        <div class="dropdown-menu dropdown-menu-right">\r\n            <a href="#" class="edit-user dropdown-item"><i class="dropdown-icon fe fe-edit"></i> '+__e(i18n("users","edit-details"))+'</a>\r\n            <a href="#" class="edit-permissions dropdown-item"><i class="dropdown-icon fe fe-shield"></i> '+__e(i18n("users","edit-permissions"))+'</a>\r\n            <a href="#" class="set-password dropdown-item"><i class="dropdown-icon fe fe-lock"></i> '+__e(i18n("users","change-password"))+"</a>\r\n            ",isSelf()||(__p+="\r\n            ",is_disabled||(__p+='\r\n            <a href="#" class="login dropdown-item"><i class="dropdown-icon fe fe-log-in"></i> '+__e(i18n("users","sign-in-as"))+"</a>\r\n            "),__p+='\r\n            <div class="dropdown-divider"></div>\r\n            <a href="#" class="delete-user dropdown-item"><i class="dropdown-icon fe fe-trash-2"></i> '+__e(i18n("users","delete",{name:name}))+"</a>\r\n            "),__p+="\r\n        </div>\r\n    </div>\r\n</td>\r\n"}return __p}}).call(this,__webpack_require__(3))},223:function(module,exports,__webpack_require__){(function(_){module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<thead>\r\n    <th width="30">&nbsp;</th>\r\n    <th>'+__e(i18n("str","name"))+"</th>\r\n    <th>"+__e(i18n("str","email"))+"</th>\r\n    <th>"+__e(i18n("str","roles"))+"</th>\r\n    <th>&nbsp;</th>\r\n</thead>\r\n<tbody>\r\n    \x3c!-- items --\x3e\r\n</tbody>\r\n";return __p}}).call(this,__webpack_require__(3))},224:function(module,exports,__webpack_require__){(function(_){module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="card">\r\n    <div class="card-status bg-teal"></div>\r\n    <div class="card-header">\r\n        <h3 class="card-title">'+__e(i18n("users","title"))+'</h3>\r\n        <div class="card-options">\r\n            <a href="#" class="btn btn-outline-teal btn-sm ml-2 add-item">'+__e(i18n("users","add"))+'</a>\r\n        </div>\r\n    </div>\r\n    <div class="card-body no-padding min-100">\r\n        <div class="dimmer active">\r\n            <div class="loader"></div>\r\n            <div class="dimmer-content list-region">\r\n                \x3c!-- List Region --\x3e\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n';return __p}}).call(this,__webpack_require__(3))}}]);