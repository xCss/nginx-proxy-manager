(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{177:function(e,s,n){const r=n(6),i=n(2),t=n(151),a=n(225);n(206),e.exports=r.View.extend({template:a,className:"modal-dialog",ui:{form:"form",buttons:".modal-footer button",cancel:"button.cancel",save:"button.save",error:".secret-error"},events:{"click @ui.save":function(e){e.preventDefault(),this.ui.error.hide();let s=this,n=this.ui.form.serializeJSON(),r="admin@example.com"===this.model.get("email");if("admin@example.com"===n.email)return this.ui.error.text(i.i18n("users","default_error")).show(),void this.ui.buttons.prop("disabled",!1).removeClass("btn-disabled");n.roles=[],(this.model.get("id")===i.Cache.User.get("id")&&this.model.isAdmin()||void 0!==n.is_admin&&n.is_admin)&&(n.roles.push("admin"),delete n.is_admin),n.is_disabled=void 0!==n.is_disabled&&!!n.is_disabled,this.ui.buttons.prop("disabled",!0).addClass("btn-disabled");let t=i.Api.Users.create;this.model.get("id")&&(t=i.Api.Users.update,n.id=this.model.get("id")),t(n).then(e=>{e.id===i.Cache.User.get("id")&&i.Cache.User.set(e),s.model.get("id")!==i.Cache.User.get("id")&&i.Controller.showUsers(),s.model.set(e),i.UI.closeModal((function(){t===i.Api.Users.create?i.Controller.showUserPermissions(s.model):r&&i.Controller.showUserPasswordForm(s.model)}))}).catch(e=>{this.ui.error.text(e.message).show(),this.ui.buttons.prop("disabled",!1).removeClass("btn-disabled")})}},templateContext:function(){let e=this;return{isSelf:function(){return e.model.get("id")===i.Cache.User.get("id")},isAdmin:function(){return i.Cache.User.isAdmin()},isAdminUser:function(){return e.model.isAdmin()},isDisabled:function(){return e.model.isDisabled()}}},initialize:function(e){void 0!==e.model&&e.model||(this.model=new t.Model)}})},206:function(e,s,n){var r,i,t;
/*!
  SerializeJSON jQuery plugin.
  https://github.com/marioizquierdo/jquery.serializeJSON
  version 2.9.0 (Jan, 2018)

  Copyright (c) 2012-2018 Mario Izquierdo
  Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
  and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
*/i=[n(4)],void 0===(t="function"==typeof(r=function(e){"use strict";e.fn.serializeJSON=function(s){var n,r,i,t,a,l,o,u,d,c,p,m;return n=e.serializeJSON,r=this,i=n.setupOpts(s),t=r.serializeArray(),n.readCheckboxUncheckedValues(t,i,r),a={},e.each(t,(function(e,s){l=s.name,o=s.value,d=n.extractTypeAndNameWithNoType(l),c=d.nameWithNoType,(p=d.type)||(p=n.attrFromInputWithName(r,l,"data-value-type")),n.validateType(l,p,i),"skip"!==p&&(m=n.splitInputNameIntoKeysArray(c),!(u=n.parseValue(o,l,p,i))&&n.shouldSkipFalsy(r,l,c,p,i)||n.deepSet(a,m,u,i))})),a},e.serializeJSON={defaultOptions:{checkboxUncheckedValue:void 0,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,skipFalsyValuesForTypes:[],skipFalsyValuesForFields:[],customTypes:{},defaultTypes:{string:function(e){return String(e)},number:function(e){return Number(e)},boolean:function(e){return-1===["false","null","undefined","","0"].indexOf(e)},null:function(e){return-1===["false","null","undefined","","0"].indexOf(e)?e:null},array:function(e){return JSON.parse(e)},object:function(e){return JSON.parse(e)},auto:function(s){return e.serializeJSON.parseValue(s,null,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})},skip:null},useIntKeysAsArrayIndex:!1},setupOpts:function(s){var n,r,i,t,a,l;for(n in l=e.serializeJSON,null==s&&(s={}),i=l.defaultOptions||{},r=["checkboxUncheckedValue","parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","skipFalsyValuesForTypes","skipFalsyValuesForFields","customTypes","defaultTypes","useIntKeysAsArrayIndex"],s)if(-1===r.indexOf(n))throw new Error("serializeJSON ERROR: invalid option '"+n+"'. Please use one of "+r.join(", "));return a=(t=function(e){return!1!==s[e]&&""!==s[e]&&(s[e]||i[e])})("parseAll"),{checkboxUncheckedValue:t("checkboxUncheckedValue"),parseNumbers:a||t("parseNumbers"),parseBooleans:a||t("parseBooleans"),parseNulls:a||t("parseNulls"),parseWithFunction:t("parseWithFunction"),skipFalsyValuesForTypes:t("skipFalsyValuesForTypes"),skipFalsyValuesForFields:t("skipFalsyValuesForFields"),typeFunctions:e.extend({},t("defaultTypes"),t("customTypes")),useIntKeysAsArrayIndex:t("useIntKeysAsArrayIndex")}},parseValue:function(s,n,r,i){var t,a;return t=e.serializeJSON,a=s,i.typeFunctions&&r&&i.typeFunctions[r]?a=i.typeFunctions[r](s):i.parseNumbers&&t.isNumeric(s)?a=Number(s):!i.parseBooleans||"true"!==s&&"false"!==s?i.parseNulls&&"null"==s?a=null:i.typeFunctions&&i.typeFunctions.string&&(a=i.typeFunctions.string(s)):a="true"===s,i.parseWithFunction&&!r&&(a=i.parseWithFunction(a,n)),a},isObject:function(e){return e===Object(e)},isUndefined:function(e){return void 0===e},isValidArrayIndex:function(e){return/^[0-9]+$/.test(String(e))},isNumeric:function(e){return e-parseFloat(e)>=0},optionKeys:function(e){if(Object.keys)return Object.keys(e);var s,n=[];for(s in e)n.push(s);return n},readCheckboxUncheckedValues:function(s,n,r){var i,t,a;null==n&&(n={}),e.serializeJSON,i="input[type=checkbox][name]:not(:checked):not([disabled])",r.find(i).add(r.filter(i)).each((function(r,i){if(t=e(i),null==(a=t.attr("data-unchecked-value"))&&(a=n.checkboxUncheckedValue),null!=a){if(i.name&&-1!==i.name.indexOf("[]["))throw new Error("serializeJSON ERROR: checkbox unchecked values are not supported on nested arrays of objects like '"+i.name+"'. See https://github.com/marioizquierdo/jquery.serializeJSON/issues/67");s.push({name:i.name,value:a})}}))},extractTypeAndNameWithNoType:function(e){var s;return(s=e.match(/(.*):([^:]+)$/))?{nameWithNoType:s[1],type:s[2]}:{nameWithNoType:e,type:null}},shouldSkipFalsy:function(s,n,r,i,t){var a=e.serializeJSON.attrFromInputWithName(s,n,"data-skip-falsy");if(null!=a)return"false"!==a;var l=t.skipFalsyValuesForFields;if(l&&(-1!==l.indexOf(r)||-1!==l.indexOf(n)))return!0;var o=t.skipFalsyValuesForTypes;return null==i&&(i="string"),!(!o||-1===o.indexOf(i))},attrFromInputWithName:function(e,s,n){var r;return r='[name="'+s.replace(/(:|\.|\[|\]|\s)/g,"\\$1")+'"]',e.find(r).add(e.filter(r)).attr(n)},validateType:function(s,n,r){var i,t;if(i=(t=e.serializeJSON).optionKeys(r?r.typeFunctions:t.defaultOptions.defaultTypes),n&&-1===i.indexOf(n))throw new Error("serializeJSON ERROR: Invalid type "+n+" found in input name '"+s+"', please use one of "+i.join(", "));return!0},splitInputNameIntoKeysArray:function(s){var n;return e.serializeJSON,n=s.split("["),""===(n=e.map(n,(function(e){return e.replace(/\]/g,"")})))[0]&&n.shift(),n},deepSet:function(s,n,r,i){var t,a,l,o,u,d;if(null==i&&(i={}),(d=e.serializeJSON).isUndefined(s))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!n||0===n.length)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");t=n[0],1===n.length?""===t?s.push(r):s[t]=r:(a=n[1],""===t&&(u=s[o=s.length-1],t=d.isObject(u)&&(d.isUndefined(u[a])||n.length>2)?o:o+1),""===a||i.useIntKeysAsArrayIndex&&d.isValidArrayIndex(a)?!d.isUndefined(s[t])&&e.isArray(s[t])||(s[t]=[]):!d.isUndefined(s[t])&&d.isObject(s[t])||(s[t]={}),l=n.slice(1),d.deepSet(s[t],l,r,i))}}})?r.apply(s,i):r)||(e.exports=t)},225:function(module,exports,__webpack_require__){(function(_){module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj)__p+='<div class="modal-content">\r\n    <div class="modal-header">\r\n        <h5 class="modal-title">'+__e(i18n("users","form-title",{id:id}))+'</h5>\r\n        <button type="button" class="close cancel" aria-label="Close" data-dismiss="modal">&nbsp;</button>\r\n    </div>\r\n    <div class="modal-body">\r\n        <form>\r\n            <div class="row">\r\n                <div class="col-sm-6 col-md-6">\r\n                    <div class="form-group">\r\n                        <label class="form-label">'+__e(i18n("users","full-name"))+' <span class="form-required">*</span></label>\r\n                        <input name="name" type="text" class="form-control" placeholder="Joe Citizen" value="'+__e(name)+'" required>\r\n                    </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6">\r\n                    <div class="form-group">\r\n                        <label class="form-label">'+__e(i18n("users","nickname"))+'<span class="form-required">*</span> </label>\r\n                        <input name="nickname" type="text" class="form-control" placeholder="Joe" value="'+__e(nickname)+'" required>\r\n                    </div>\r\n                </div>\r\n                <div class="col-sm-12 col-md-12">\r\n                    <div class="form-group">\r\n                        <label class="form-label">'+__e(i18n("str","email"))+' <span class="form-required">*</span></label>\r\n                        <input name="email" type="email" class="form-control" placeholder="joe@example.com" value="'+__e(email)+'" required>\r\n                        <div class="invalid-feedback secret-error"></div>\r\n                    </div>\r\n                </div>\r\n                ',isAdmin()&&!isSelf()&&(__p+='\r\n                <div class="col-sm-12 col-md-12">\r\n                    <div class="form-label">'+__e(i18n("roles","title"))+'</div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6">\r\n                    <div class="form-group">\r\n                        <label class="custom-switch">\r\n                            <input type="checkbox" class="custom-switch-input" name="is_admin" value="1"'+__e(isAdminUser()?" checked":"")+__e(isSelf()?" disabled":"")+'>\r\n                            <span class="custom-switch-indicator"></span>\r\n                            <span class="custom-switch-description">'+__e(i18n("roles","admin"))+'</span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div class="col-sm-6 col-md-6">\r\n                    <div class="form-group">\r\n                        <label class="custom-switch">\r\n                            <input type="checkbox" class="custom-switch-input" name="is_disabled" value="1"'+__e(is_disabled?" checked":"")+__e(isSelf()?" disabled":"")+'>\r\n                            <span class="custom-switch-indicator"></span>\r\n                            <span class="custom-switch-description">'+__e(i18n("str","disabled"))+"</span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                "),__p+='\r\n            </div>\r\n        </form>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="button" class="btn btn-secondary cancel" data-dismiss="modal">'+__e(i18n("str","cancel"))+'</button>\r\n        <button type="button" class="btn btn-teal save">'+__e(i18n("str","save"))+"</button>\r\n    </div>\r\n</div>\r\n";return __p}}).call(this,__webpack_require__(3))}}]);