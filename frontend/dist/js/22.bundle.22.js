(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{178:function(e,n,s){(function(n){const r=s(6),t=s(2),i=s(151),a=s(226);s(206),e.exports=r.View.extend({template:a,className:"modal-dialog",ui:{form:"form",buttons:".modal-footer button",cancel:"button.cancel",save:"button.save",error:".secret-error"},events:{"click @ui.save":function(e){e.preventDefault();let s=this,r=this.ui.form.serializeJSON();s.model.isAdmin()&&(r=n.assign({},r,{access_lists:"manage",dead_hosts:"manage",proxy_hosts:"manage",redirection_hosts:"manage",streams:"manage",certificates:"manage"})),this.ui.buttons.prop("disabled",!0).addClass("btn-disabled"),t.Api.Users.setPermissions(s.model.get("id"),r).then(()=>{s.model.get("id")===t.Cache.User.get("id")&&t.Cache.User.set({permissions:r}),s.model.set({permissions:r}),t.UI.closeModal()}).catch(e=>{this.ui.error.text(e.message).show(),this.ui.buttons.prop("disabled",!1).removeClass("btn-disabled")})}},templateContext:function(){let e=this.model.get("permissions"),n=this.model.isAdmin();return{getPerm:function(n){return null!==e&&void 0!==e[n]?e[n]:null},getPermProps:function(s,r,t){return t&&n?"checked disabled":n?"disabled":null!==e&&void 0!==e[s]&&e[s]===r?"checked":""},isAdmin:function(){return n}}},initialize:function(e){void 0!==e.model&&e.model||(this.model=new i.Model)}})}).call(this,s(3))},206:function(e,n,s){var r,t,i;
/*!
  SerializeJSON jQuery plugin.
  https://github.com/marioizquierdo/jquery.serializeJSON
  version 2.9.0 (Jan, 2018)

  Copyright (c) 2012-2018 Mario Izquierdo
  Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
  and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
*/t=[s(4)],void 0===(i="function"==typeof(r=function(e){"use strict";e.fn.serializeJSON=function(n){var s,r,t,i,a,l,o,u,c,p,d,m;return s=e.serializeJSON,r=this,t=s.setupOpts(n),i=r.serializeArray(),s.readCheckboxUncheckedValues(i,t,r),a={},e.each(i,(function(e,n){l=n.name,o=n.value,c=s.extractTypeAndNameWithNoType(l),p=c.nameWithNoType,(d=c.type)||(d=s.attrFromInputWithName(r,l,"data-value-type")),s.validateType(l,d,t),"skip"!==d&&(m=s.splitInputNameIntoKeysArray(p),!(u=s.parseValue(o,l,d,t))&&s.shouldSkipFalsy(r,l,p,d,t)||s.deepSet(a,m,u,t))})),a},e.serializeJSON={defaultOptions:{checkboxUncheckedValue:void 0,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,skipFalsyValuesForTypes:[],skipFalsyValuesForFields:[],customTypes:{},defaultTypes:{string:function(e){return String(e)},number:function(e){return Number(e)},boolean:function(e){return-1===["false","null","undefined","","0"].indexOf(e)},null:function(e){return-1===["false","null","undefined","","0"].indexOf(e)?e:null},array:function(e){return JSON.parse(e)},object:function(e){return JSON.parse(e)},auto:function(n){return e.serializeJSON.parseValue(n,null,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})},skip:null},useIntKeysAsArrayIndex:!1},setupOpts:function(n){var s,r,t,i,a,l;for(s in l=e.serializeJSON,null==n&&(n={}),t=l.defaultOptions||{},r=["checkboxUncheckedValue","parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","skipFalsyValuesForTypes","skipFalsyValuesForFields","customTypes","defaultTypes","useIntKeysAsArrayIndex"],n)if(-1===r.indexOf(s))throw new Error("serializeJSON ERROR: invalid option '"+s+"'. Please use one of "+r.join(", "));return a=(i=function(e){return!1!==n[e]&&""!==n[e]&&(n[e]||t[e])})("parseAll"),{checkboxUncheckedValue:i("checkboxUncheckedValue"),parseNumbers:a||i("parseNumbers"),parseBooleans:a||i("parseBooleans"),parseNulls:a||i("parseNulls"),parseWithFunction:i("parseWithFunction"),skipFalsyValuesForTypes:i("skipFalsyValuesForTypes"),skipFalsyValuesForFields:i("skipFalsyValuesForFields"),typeFunctions:e.extend({},i("defaultTypes"),i("customTypes")),useIntKeysAsArrayIndex:i("useIntKeysAsArrayIndex")}},parseValue:function(n,s,r,t){var i,a;return i=e.serializeJSON,a=n,t.typeFunctions&&r&&t.typeFunctions[r]?a=t.typeFunctions[r](n):t.parseNumbers&&i.isNumeric(n)?a=Number(n):!t.parseBooleans||"true"!==n&&"false"!==n?t.parseNulls&&"null"==n?a=null:t.typeFunctions&&t.typeFunctions.string&&(a=t.typeFunctions.string(n)):a="true"===n,t.parseWithFunction&&!r&&(a=t.parseWithFunction(a,s)),a},isObject:function(e){return e===Object(e)},isUndefined:function(e){return void 0===e},isValidArrayIndex:function(e){return/^[0-9]+$/.test(String(e))},isNumeric:function(e){return e-parseFloat(e)>=0},optionKeys:function(e){if(Object.keys)return Object.keys(e);var n,s=[];for(n in e)s.push(n);return s},readCheckboxUncheckedValues:function(n,s,r){var t,i,a;null==s&&(s={}),e.serializeJSON,t="input[type=checkbox][name]:not(:checked):not([disabled])",r.find(t).add(r.filter(t)).each((function(r,t){if(i=e(t),null==(a=i.attr("data-unchecked-value"))&&(a=s.checkboxUncheckedValue),null!=a){if(t.name&&-1!==t.name.indexOf("[]["))throw new Error("serializeJSON ERROR: checkbox unchecked values are not supported on nested arrays of objects like '"+t.name+"'. See https://github.com/marioizquierdo/jquery.serializeJSON/issues/67");n.push({name:t.name,value:a})}}))},extractTypeAndNameWithNoType:function(e){var n;return(n=e.match(/(.*):([^:]+)$/))?{nameWithNoType:n[1],type:n[2]}:{nameWithNoType:e,type:null}},shouldSkipFalsy:function(n,s,r,t,i){var a=e.serializeJSON.attrFromInputWithName(n,s,"data-skip-falsy");if(null!=a)return"false"!==a;var l=i.skipFalsyValuesForFields;if(l&&(-1!==l.indexOf(r)||-1!==l.indexOf(s)))return!0;var o=i.skipFalsyValuesForTypes;return null==t&&(t="string"),!(!o||-1===o.indexOf(t))},attrFromInputWithName:function(e,n,s){var r;return r='[name="'+n.replace(/(:|\.|\[|\]|\s)/g,"\\$1")+'"]',e.find(r).add(e.filter(r)).attr(s)},validateType:function(n,s,r){var t,i;if(t=(i=e.serializeJSON).optionKeys(r?r.typeFunctions:i.defaultOptions.defaultTypes),s&&-1===t.indexOf(s))throw new Error("serializeJSON ERROR: Invalid type "+s+" found in input name '"+n+"', please use one of "+t.join(", "));return!0},splitInputNameIntoKeysArray:function(n){var s;return e.serializeJSON,s=n.split("["),""===(s=e.map(s,(function(e){return e.replace(/\]/g,"")})))[0]&&s.shift(),s},deepSet:function(n,s,r,t){var i,a,l,o,u,c;if(null==t&&(t={}),(c=e.serializeJSON).isUndefined(n))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!s||0===s.length)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");i=s[0],1===s.length?""===i?n.push(r):n[i]=r:(a=s[1],""===i&&(u=n[o=n.length-1],i=c.isObject(u)&&(c.isUndefined(u[a])||s.length>2)?o:o+1),""===a||t.useIntKeysAsArrayIndex&&c.isValidArrayIndex(a)?!c.isUndefined(n[i])&&e.isArray(n[i])||(n[i]=[]):!c.isUndefined(n[i])&&c.isObject(n[i])||(n[i]={}),l=s.slice(1),c.deepSet(n[i],l,r,t))}}})?r.apply(n,t):r)||(e.exports=i)},226:function(module,exports,__webpack_require__){(function(_){module.exports=function(obj){obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj){__p+='<div class="modal-content">\r\n    <div class="modal-header">\r\n        <h5 class="modal-title">'+__e(i18n("users","permissions-title",{name:name}))+'</h5>\r\n        <button type="button" class="close cancel" aria-label="Close" data-dismiss="modal">&nbsp;</button>\r\n    </div>\r\n    <div class="modal-body">\r\n        <form>\r\n            <div class="row">\r\n                <div class="col-sm-12 col-md-12">\r\n\r\n                    ',isAdmin()&&(__p+='\r\n                    <div class="alert alert-icon alert-secondary" role="alert">\r\n                        <i class="fe fe-alert-triangle mr-2" aria-hidden="true"></i>\r\n                        '+__e(i18n("users","admin-perms"))+"\r\n                    </div>\r\n                    "),__p+='\r\n\r\n                    <div class="form-group">\r\n                        <label class="form-label">'+__e(i18n("users","perms-visibility"))+'</label>\r\n                        <div class="selectgroup w-100">\r\n                            <label class="selectgroup-item">\r\n                                <input type="radio" name="visibility" value="user" class="selectgroup-input"'+__e("all"!==getPerm("visibility")?" checked":"")+'>\r\n                                <span class="selectgroup-button">'+__e(i18n("users","perms-visibility-user"))+'</span>\r\n                            </label>\r\n                            <label class="selectgroup-item">\r\n                                <input type="radio" name="visibility" value="all" class="selectgroup-input"'+__e("all"===getPerm("visibility")?" checked":"")+'>\r\n                                <span class="selectgroup-button">'+__e(i18n("users","perms-visibility-all"))+"</span>\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                ";var list=["proxy-hosts","redirection-hosts","dead-hosts","streams","access-lists","certificates"];list.map((function(e){var n=e.replace("-","_");__p+='\r\n                    <div class="col-sm-12 col-md-12">\r\n                        <div class="form-group">\r\n                            <label class="form-label">'+__e(i18n(e,"title"))+'</label>\r\n                            <div class="selectgroup w-100">\r\n                                <label class="selectgroup-item">\r\n                                    <input type="radio" name="'+__e(n)+'" value="manage" class="selectgroup-input" '+__e(getPermProps(n,"manage",!0))+'>\r\n                                    <span class="selectgroup-button">'+__e(i18n("users","perm-manage"))+'</span>\r\n                                </label>\r\n                                <label class="selectgroup-item">\r\n                                    <input type="radio" name="'+__e(n)+'" value="view" class="selectgroup-input" '+__e(getPermProps(n,"view"))+'>\r\n                                    <span class="selectgroup-button">'+__e(i18n("users","perm-view"))+'</span>\r\n                                </label>\r\n                                <label class="selectgroup-item">\r\n                                    <input type="radio" name="'+__e(n)+'" value="hidden" class="selectgroup-input" '+__e(getPermProps(n,"hidden"))+'>\r\n                                    <span class="selectgroup-button">'+__e(i18n("users","perm-hidden"))+"</span>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    "})),__p+='\r\n\r\n            </div>\r\n        </form>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button type="button" class="btn btn-secondary cancel" data-dismiss="modal">'+__e(i18n("str","cancel"))+'</button>\r\n        <button type="button" class="btn btn-teal save">'+__e(i18n("str","save"))+"</button>\r\n    </div>\r\n</div>\r\n"}return __p}}).call(this,__webpack_require__(3))}}]);